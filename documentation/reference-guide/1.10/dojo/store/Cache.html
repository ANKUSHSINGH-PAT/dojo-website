<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo/store/Cache &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="../../../../../css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="../../../scripts/dojo/dojo/dojo.js"></script>
    <script src="../../../../../scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="../../../../../scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../../index.html">Startpage</a></li>
          <li><a href="../index.html">Dojo</a></li>
          <li><a href="../../dijit/index.html">Dijit</a></li>
          <li><a href="../../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojo/store/Cache</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojo-store-cache">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo/store/Cache</a><a class="headerlink" href="#dojo-store-cache" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Kris Zyp</td>
</tr>
<tr class="field-even field"><th class="field-name">Project owner:</th><td class="field-body">Kris Zyp</td>
</tr>
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">V1.6</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-store-cache" id="id2">dojo/store/Cache</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#examples" id="id4">Examples</a></li>
<li><a class="reference internal" href="#api" id="id5">API</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>dojo/store/Cache</strong> is a object store wrapper for caching data from one store in another store. This store follows the <a class="reference internal" href="../store.html#dojo-store"><span>Dojo Object Store API</span></a>.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Cache store provides caching capabilities for stores. The Cache store takes two stores, a master store and caching store. The master store is considered the data authority, all modifications go to the master store, and when data is not available in the cache, it is retrieved from the master store. The caching store is used to record cached data from master store. Doing get() and query() call results are added to the cache (unless they don&#8217;t meet provided criteria), but only get() uses the cache, whereas query() uses the master store. If you want to a query to come from the cache, directly call query() on the caching store. Data modifications are also mirrored in the caching store. A typical usage of dojo/store/Cache would be to use a JsonRest store as the master store, and a Memory store as the caching store.</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><pre><span class="nx">restStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JsonRest</span><span class="p">(...);</span>
<span class="nx">memoryStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Memory</span><span class="p">();</span>
<span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cache</span><span class="p">(</span><span class="nx">restStore</span><span class="p">,</span> <span class="nx">memoryStore</span><span class="p">);</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nx">Returns</span> <span class="nx">the</span> <span class="nx">object</span> <span class="kd">with</span> <span class="nx">an</span> <span class="nx">id</span> <span class="nx">of</span> <span class="mi">1</span> <span class="nx">by</span> <span class="nx">making</span> <span class="nx">a</span> <span class="nx">GET</span> <span class="nx">request</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nx">Returns</span> <span class="nx">the</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">using</span> <span class="nx">the</span> <span class="nx">local</span> <span class="nx">memory</span> <span class="nx">cache</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span><span class="s2">&quot;two&quot;</span><span class="p">})</span> <span class="o">-&gt;</span> <span class="nx">Stores</span> <span class="nx">the</span> <span class="nx">object</span> <span class="k">in</span> <span class="nx">both</span> <span class="nx">master</span> <span class="nx">and</span> <span class="nx">cache</span> <span class="nx">store</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nx">Returns</span> <span class="nx">the</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">using</span> <span class="nx">the</span> <span class="nx">local</span> <span class="nx">memory</span> <span class="nx">cache</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">restStore = new JsonRest(...);
memoryStore = new Memory();
store = new Cache(restStore, memoryStore);

store.get(1) -&gt; Returns the object with an id of 1 by making a GET request
store.get(1) -&gt; Returns the object, using the local memory cache
store.put({id:2, name:&quot;two&quot;}) -&gt; Stores the object in both master and cache store
store.get(2) -&gt; Returns the object, using the local memory cache</textarea></div></div>
<div class="section" id="api">
<h2><a class="toc-backref" href="#id5">API</a><a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>A Cache store wrapper is created by calling the dojo.store.Cache constructor with the master store as the first parameter, the caching store as the second parameter, and an optional &#8220;options&#8221; parameter as a third argument.</p>
<p>The options parameter may be object with the following optional methods:</p>
<ul class="simple">
<li>isLoaded - If this function is provided, it can return true or false to indicate whether an object from a query is fully loaded and should go in the cache. When a query is performed, this function will be called for each object in the query results. By default, all objects from query results are cached.</li>
</ul>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>