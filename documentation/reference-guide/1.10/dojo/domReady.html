<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo/domReady! &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="../../../../css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="../../../scripts/dojo/dojo/dojo.js"></script>
    <script src="../../../../scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="../../../../scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojo/domReady!</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#notes">Notes</a><ul>
<li><a class="reference internal" href="#dijit-widgets">Dijit/Widgets</a></li>
<li><a class="reference internal" href="#sync-loader">Sync Loader</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojo-domready">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo/domReady!</a><a class="headerlink" href="#dojo-domready" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">v1.7</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-domready" id="id2">dojo/domReady!</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#notes" id="id5">Notes</a></li>
<li><a class="reference internal" href="#see-also" id="id6">See Also</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>dojo/domReady!</strong> is an AMD loaded plugin that will wait until the DOM has finished loading before returning.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Sooner or later, every JavaScript programmer tries something like this:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">){</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">&quot;musicPrefs&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;other&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/form&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script type=&quot;text/javascript&quot;&gt;
    if(dayOfWeek == &quot;Sunday&quot;){
      document.musicPrefs.other.value = &quot;Afrobeat&quot;;
    }
&lt;/script&gt;
&lt;form name=&quot;musicPrefs&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;other&quot;&gt;
    ...
&lt;/form&gt;</textarea></div><p>It doesn&#8217;t work because the &#8220;other&#8221; control is not defined yet. You can move the code to the bottom of the page, but
that removes the linear nature of HTML. If you&#8217;re reading the code, you want to zero in on a control, and see the code
that influences it close by.</p>
<p><code class="docutils literal"><span class="pre">dojo/domReady!</span></code> solves this problem:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// will not run until DOM is finished loading</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">){</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/domReady!&quot;], function(){
  // will not run until DOM is finished loading
  if(dayOfWeek == &quot;Sunday&quot;){
    document.musicPrefs.other.value = &quot;Afrobeat&quot;;
  }
});</textarea></div><p><code class="docutils literal"><span class="pre">dojo/domReady!</span></code> is similar to old usage prior to 1.7 of <a class="reference internal" href="ready.html#dojo-ready"><span>dojo.ready()</span></a> or
<a class="reference internal" href="addOnLoad.html#dojo-addonload"><span>dojo.addOnLoad()</span></a>, but more specific, because <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> merely waits for the DOM to
finish loading, without waiting for other <code class="docutils literal"><span class="pre">require()</span></code> or <code class="docutils literal"><span class="pre">dojo.require()</span></code> calls to complete.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// will not be called until DOM is ready</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/domReady!&quot;], function(){
  // will not be called until DOM is ready
});</textarea></div><p>Common convention is not to assign a return variable to the callback function, since its return is meaningless.
Also, it is common convention to put it at the end of any array of requirements:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/query&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dom</span><span class="p">,</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">on</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/dom&quot;, &quot;dojo/query&quot;, &quot;dojo/on&quot;, &quot;dojo/domReady!&quot;], function(dom, query, on){
  // ...
});</textarea></div></div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id5">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dijit-widgets">
<h3>Dijit/Widgets<a class="headerlink" href="#dijit-widgets" title="Permalink to this headline">¶</a></h3>
<p>Note that waiting for <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> to fire is often not sufficient when working with widgets. Many widgets
shouldn&#8217;t be initialized or accessed until the following modules load and execute:</p>
<ul class="simple">
<li><a class="reference internal" href="uacss.html#dojo-uacss"><span>dojo/uacss</span></a></li>
<li><a class="reference internal" href="../dijit/hccss.html#dijit-hccss"><span>dijit/hccss</span></a></li>
<li><a class="reference internal" href="parser.html#dojo-parser"><span>dojo/parser</span></a></li>
</ul>
<p>Thus when working with widgets you should generally put your code inside of a <a class="reference internal" href="ready.html#dojo-ready"><span>dojo/ready()</span></a>
callback:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit/form/Button&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/ready&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">ready</span><span class="p">){</span>
  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// deal with widgets here</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dijit/form/Button&quot;, &quot;dojo/ready&quot;], function(Button, ready){
  ready(function(){
    // deal with widgets here
  });
});</textarea></div></div>
<div class="section" id="sync-loader">
<h3>Sync Loader<a class="headerlink" href="#sync-loader" title="Permalink to this headline">¶</a></h3>
<p>You should not use <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> with modules that may be loaded with the legacy synchronous loader.</p>
<p>In other words, if your application does <em>not</em> specify <code class="docutils literal"><span class="pre">async:</span> <span class="pre">true</span></code> in the Dojo configuration, or if it loads
modules via <code class="docutils literal"><span class="pre">dojo.require()</span></code> instead of the AMD <code class="docutils literal"><span class="pre">require()</span></code> API, then using <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> may cause
<code class="docutils literal"><span class="pre">dojo.ready()</span></code> to call its callback before all the modules have loaded.</p>
<p>For reference, the cause of this intermittent failure is that when you write:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="s2">&quot;m2&quot;</span><span class="p">,</span> <span class="p">...,</span> <span class="s2">&quot;mn&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m1</span><span class="p">,</span> <span class="nx">m2</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">mn</span><span class="p">){</span><span class="c1">//...</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([&quot;m1&quot;, &quot;m2&quot;, ..., &quot;mn&quot;], function(m1, m2, ..., mn){//...</textarea></div><p>and run in sync mode, the loader <em>ensures</em> the evaluation of <code class="docutils literal"><span class="pre">m1..mn</span></code> <em>in order</em>. It does than by just traversing
each dependency tree as it comes to it. And it expects each dependency tree to be fully &#8220;traversable&#8221; and the module
completely resolved at the end of the traversal.</p>
<p>Now comes along <code class="docutils literal"><span class="pre">dojo/domReady!</span></code>. The loader loads all the dependencies for <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> and then demands the
plugin resource be resolved. But <code class="docutils literal"><span class="pre">dojo/domReady!</span></code> may not be able to resolve the demanded plugin resource (an empty
module ID which is intended to signal the DOM is ready) because the DOM may not be ready. The loader notices this an
sees that the module was not capable of being loaded synchronously, gives up and continues.</p>
<p>This is an intentional limitation in the loader, since handling it would have required more complicated code.
It will cease to be an issue for Dojo 2.0, when the synchronous loader is desupported.</p>
</div>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="ready.html#dojo-ready"><span>dojo/ready</span></a> - The module for more complex callback management.</li>
</ul>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>