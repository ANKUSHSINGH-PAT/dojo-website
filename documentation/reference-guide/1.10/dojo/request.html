<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo/request &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="/scripts/dojo/dojo/dojo.js"></script>
    <script src="/scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojo/request</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojo-request">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo/request</a><a class="headerlink" href="#dojo-request" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">authors:</th><td class="field-body">Bryan Forbes</td>
</tr>
<tr class="field-even field"><th class="field-name">since:</th><td class="field-body">V1.8</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-request" id="id2">dojo/request</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a></li>
<li><a class="reference internal" href="#see-also" id="id6">See also</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>dojo/request</strong> is a package which provides asynchronous requests in a cross platform way. This is commonly
referred to as AJAX.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><strong>dojo/request</strong> is comprised of several modules that provide functionality around asynchronous requests. It
leverages the <a class="reference internal" href="promise.html#dojo-promise"><span>dojo/promise</span></a> API to manage the asynchronous communication. The concept is
that a <em>request</em> has a <em>provider</em>. The providers behave in similar way and have the same core API, but may add
additional interfaces as needed to fully support the functionality of the particular type of provider. The
following providers are available in <code class="docutils literal"><span class="pre">dojo/request</span></code>:</p>
<ul class="simple">
<li><a class="reference internal" href="request/xhr.html#dojo-request-xhr"><span>dojo/request/xhr</span></a> - Provides a cross browser compatible <code class="docutils literal"><span class="pre">XmlHttpRequest</span></code>. It is
the default provider for browser platforms.</li>
<li><a class="reference internal" href="request/node.html#dojo-request-node"><span>dojo/request/node</span></a> - Provides an asynchronous request for
<a class="reference external" href="http://nodejs.org/">node.js</a>. It is the default provider for node.js.</li>
<li><a class="reference internal" href="request/iframe.html#dojo-request-iframe"><span>dojo/request/iframe</span></a> - Provides an IFrame transport for the asynchronous request.
This is useful in situations where files need to be submitted or certain cross domain situations.</li>
<li><a class="reference internal" href="request/script.html#dojo-request-script"><span>dojo/request/script</span></a> - Provides a transport where the return payload is expected
to be embedded in a <code class="docutils literal"><span class="pre">&lt;script&gt;</span></code> tag.</li>
</ul>
<p>By requiring the <code class="docutils literal"><span class="pre">dojo/request</span></code> module, it will return the default provider for the current platform.</p>
<p>Once the request is fulfilled, the response can be handled by a handler. <code class="docutils literal"><span class="pre">dojo/request</span></code> provides the following
handlers as a default:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">json</span></code> - The response is expected to be JSON and is converted to an object.</li>
<li><code class="docutils literal"><span class="pre">xml</span></code> - The response is expected to be XML and is converted to an object.</li>
<li><code class="docutils literal"><span class="pre">javascript</span></code> - The response is expected to be JavaScript and <code class="docutils literal"><span class="pre">eval()</span></code> is used against the response.</li>
</ul>
<p>In addition, <a class="reference internal" href="request/handlers.html#dojo-request-handlers"><span>dojo/request/handlers</span></a> provides a mechanism to register additional
handlers that then can be used to deal with different types of responses.</p>
<p>There are a few modules as part of the package which assist in managing requests:</p>
<ul class="simple">
<li><a class="reference internal" href="request/notify.html#dojo-request-notify"><span>dojo/request/notify</span></a> - Provides an <a class="reference internal" href="Evented.html#dojo-evented"><span>dojo/Evented</span></a> interface
for global request event notification.</li>
<li><a class="reference internal" href="request/registry.html#dojo-request-registry"><span>dojo/request/registry</span></a> - Allows registering different providers by a URI pattern, so
that different providers can be used based on the target URI without the user having to code separate code paths.</li>
</ul>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Requiring the <code class="docutils literal"><span class="pre">dojo/request</span></code> module returns the default provider, so in most cases, all you need to do is simply
require that module and specify the resource you need. The most basic usage would look like this:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/request&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">){</span>
  <span class="nx">request</span><span class="p">(</span><span class="s2">&quot;request.html&quot;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// do something with handled data</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
    <span class="c1">// handle an error condition</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// handle a progress event</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/request&quot;], function(request){
  request(&quot;request.html&quot;).then(function(data){
    // do something with handled data
  }, function(err){
    // handle an error condition
  }, function(evt){
    // handle a progress event
  });
});</textarea></div><p>If the above was on a browser, <code class="docutils literal"><span class="pre">dojo/request/xhr</span></code> would have been used and if it was on node.js,
<code class="docutils literal"><span class="pre">dojo/request/node</span></code> would have been used.</p>
<p>Providers take two arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="11%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>url</td>
<td>String</td>
<td>The URL the request should be made to</td>
</tr>
<tr class="row-odd"><td>options</td>
<td>Object?</td>
<td><em>Optional</em> A hash of any options for the provider.</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">options</span></code> argument is dependent upon the provider, but some common options are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="12%" />
<col width="8%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>String|Object</td>
<td><code class="docutils literal"><span class="pre">null</span></code></td>
<td>Data, if any, that should be sent with the request.</td>
</tr>
<tr class="row-odd"><td>query</td>
<td>String|Object</td>
<td><code class="docutils literal"><span class="pre">null</span></code></td>
<td>The query string, if any, that should be sent with the request.</td>
</tr>
<tr class="row-even"><td>preventCache</td>
<td>Boolean</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
<td>If <code class="docutils literal"><span class="pre">true</span></code> will send an extra query parameter to ensure the the server won&#8217;t
supply cached values.</td>
</tr>
<tr class="row-odd"><td>method</td>
<td>String</td>
<td><code class="docutils literal"><span class="pre">GET</span></code></td>
<td>The HTTP method that should be used to send the request.</td>
</tr>
<tr class="row-even"><td>timeout</td>
<td>Integer</td>
<td><code class="docutils literal"><span class="pre">null</span></code></td>
<td>The number of milliseconds to wait for the response. If this time passes the
request is canceled and the promise rejected.</td>
</tr>
<tr class="row-odd"><td>handleAs</td>
<td>String</td>
<td><code class="docutils literal"><span class="pre">text</span></code></td>
<td>The content handler to process the response payload with.</td>
</tr>
</tbody>
</table>
<p>The provider returns a promise (see <a class="reference internal" href="promise/Promise.html#dojo-promise-promise"><span>dojo/promise/Promise</span></a>) that is fulfilled with the
handled data of the response. The provider will also error out by calling the errorback function if provided.
Progress data will be given to the progress handler if it is provided and if the platform supports progress events
(any browser supporting XHR2 or node.js).</p>
<p>The promise returned by the provider has an extra property not on standard promises: <code class="docutils literal"><span class="pre">response</span></code>. This property
is a standard promise that is fulfilled with an object representing the response from the server. This object
will contain the following properties:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>url</td>
<td>The URL that was originally requested.</td>
</tr>
<tr class="row-odd"><td>options</td>
<td>Any options that were originally requested.</td>
</tr>
<tr class="row-even"><td>data</td>
<td>Contains the data of the response if appropriate.</td>
</tr>
<tr class="row-odd"><td>text</td>
<td>Contains the text of the response if appropriate.</td>
</tr>
<tr class="row-even"><td>status</td>
<td>Contains the status of the request as returned from the provider.</td>
</tr>
<tr class="row-odd"><td>getHeader(headerName)</td>
<td>A function to retrieve headers sent from the server.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'async: true, parseOnLoad: false', version:'' }, width:'700', height:'400', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><p>This example retrieves a resource from the server and then outputs the results that are returned.</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/request&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom-construct&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/json&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">domConst</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">,</span> <span class="nx">on</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;startButton&quot;</span><span class="p">),</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">domConst</span><span class="p">.</span><span class="nx">place</span><span class="p">(</span><span class="s2">&quot;&lt;p&gt;Requesting...&lt;/p&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">);</span>
    <span class="nx">request</span><span class="p">(</span><span class="s2">&quot;request/helloworld.json&quot;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
      <span class="nx">domConst</span><span class="p">.</span><span class="nx">place</span><span class="p">(</span><span class="s2">&quot;&lt;p&gt;response: &lt;code&gt;&quot;</span> <span class="o">+</span> <span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;&lt;/code&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/request&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/json&quot;, &quot;dojo/on&quot;, &quot;dojo/domReady!&quot;],
function(request, dom, domConst, JSON, on){
  on(dom.byId(&quot;startButton&quot;), &quot;click&quot;, function(){
    domConst.place(&quot;&lt;p&gt;Requesting...&lt;/p&gt;&quot;, &quot;output&quot;);
    request(&quot;request/helloworld.json&quot;).then(function(text){
      domConst.place(&quot;&lt;p&gt;response: &lt;code&gt;&quot; + text + &quot;&lt;/code&gt;&quot;, &quot;output&quot;);
    });
  });
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Output:<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;output&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">id=</span><span class="s">&quot;startButton&quot;</span><span class="nt">&gt;</span>Start<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;h1&gt;Output:&lt;/h1&gt;
&lt;div id=&quot;output&quot;&gt;&lt;/div&gt;
&lt;button type=&quot;button&quot; id=&quot;startButton&quot;&gt;Start&lt;/button&gt;</textarea></div></div></div></div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="request/xhr.html#dojo-request-xhr"><span>dojo/request/xhr</span></a> - The default provider for browser platforms</li>
<li><a class="reference internal" href="request/node.html#dojo-request-node"><span>dojo/request/node</span></a> - The default provider for the node.js platform</li>
<li><a class="reference internal" href="request/iframe.html#dojo-request-iframe"><span>dojo/request/iframe</span></a> - A provider that uses IFrame for transport</li>
<li><a class="reference internal" href="request/script.html#dojo-request-script"><span>dojo/request/script</span></a> - A provider that expects the response to be embedded in a
<code class="docutils literal"><span class="pre">&lt;script&gt;</span></code> tag.</li>
<li><a class="reference internal" href="request/handlers.html#dojo-request-handlers"><span>dojo/request/handlers</span></a> - Handles the data from a response as designated in the
<code class="docutils literal"><span class="pre">handleAs</span></code> request option. Also provides the ability to register additional types of handlers.</li>
<li><a class="reference internal" href="request/registry.html#dojo-request-registry"><span>dojo/request/registry</span></a> - Allows for registration of different providers against
different URIs.</li>
<li><a class="reference internal" href="request/notify.html#dojo-request-notify"><span>dojo/request/notify</span></a> - Publishes the <code class="docutils literal"><span class="pre">dojo/request</span></code> topics for requests.</li>
<li><a class="reference internal" href="request/watch.html#dojo-request-watch"><span>dojo/request/watch</span></a> - Allows the watching of inflight requests.</li>
<li><a class="reference internal" href="Deferred.html#dojo-deferred"><span>dojo/Deferred</span></a> - The base class for managing asynchronous processes.</li>
<li><a class="reference internal" href="promise.html#dojo-promise"><span>dojo/promise</span></a> - The package that provides the Dojo Promise API.</li>
</ul>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>