<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo/router &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="/scripts/dojo/dojo/dojo.js"></script>
    <script src="/scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojo/router</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#register">register()</a></li>
<li><a class="reference internal" href="#registerbefore">registerBefore()</a></li>
<li><a class="reference internal" href="#startup">startup()</a></li>
<li><a class="reference internal" href="#go">go()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojo-router">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo/router</a><a class="headerlink" href="#dojo-router" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-router" id="id2">dojo/router</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a></li>
<li><a class="reference internal" href="#see-also" id="id6">See Also</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>dojo/router</strong> is a package that provides the ability to map hash based structures to callbacks.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">dojo/router</span></code> is designed to allow the mapping of the browser hash to a callback, so that when the hash is updated, it can be used to direct to a callback.  It also allows for parameterization of the hash, so that parts of the hash string can be parsed out and used as variables within the callback.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Usage is requiring in the module, registering any callbacks and then starting the router:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/something/:id&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// Will fire when the hash matches</span>
    <span class="c1">// evt.params.id will contain what is passed in :id</span>
  <span class="p">});</span>

  <span class="c1">// Startup must be called in order to &quot;activate&quot; the router</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  router.register(&quot;/something/:id&quot;, function(evt){
    // Will fire when the hash matches
    // evt.params.id will contain what is passed in :id
  });

  // Startup must be called in order to &quot;activate&quot; the router
  router.startup();
});</textarea></div><div class="section" id="register">
<h3>register()<a class="headerlink" href="#register" title="Permalink to this headline">¶</a></h3>
<p>Allows the registration of a hash pattern and its associated callback.  <code class="docutils literal"><span class="pre">register()</span></code> takes two arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="12%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>route</td>
<td>String|RegExp</td>
<td>A string or regular expression that should be used for matching hash changes.</td>
</tr>
<tr class="row-odd"><td>callback</td>
<td>Function</td>
<td>When the hash matches a pattern as described in the route, this callback will be executed.</td>
</tr>
</tbody>
</table>
<p>When provided a RegExp for the <code class="docutils literal"><span class="pre">route</span></code>:</p>
<ul class="simple">
<li>Matching is performed, and the resulting capture groups are passed through to the callback as an array.</li>
</ul>
<p>When provided a string for the route:</p>
<ul class="simple">
<li>The string is parsed as a URL-like structure, like <code class="docutils literal"><span class="pre">/foo/bar</span></code></li>
<li>If any portions of that URL are prefixed with a colon (<code class="docutils literal"><span class="pre">:</span></code>), they will be parsed out and provided to the callback
as in the argument object in the <code class="docutils literal"><span class="pre">params</span></code> property.</li>
<li>If the last piece of the URL-like structure is prefixed with a star (<code class="docutils literal"><span class="pre">*</span></code>) instead of a colon, it will be replaced
in the resulting RegExp generated by the router with a greedy (<code class="docutils literal"><span class="pre">.+</span></code>) match and anything remaining on the hash will
be provided as a property on the object passed into the callback. Think of it like a basic means of globbing the end
of a route.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">callback</span></code> function will be called with an event argument that has several properties:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">params</span></code>: Either an array or object of properties pulled from the new hash</li>
<li><code class="docutils literal"><span class="pre">oldPath</span></code>: The hash in its state before the change</li>
<li><code class="docutils literal"><span class="pre">newPath</span></code>: The new hash being shifted to</li>
<li><code class="docutils literal"><span class="pre">preventDefault</span></code>: A method that will stop hash changes from being actually applied to the active hash. This only works if the hash change was initiated using <code class="docutils literal"><span class="pre">dojo/router::go()</span></code>, as changes initiated more directly to the <code class="docutils literal"><span class="pre">location.hash</span></code> property will already be in place.</li>
<li><code class="docutils literal"><span class="pre">stopImmediatePropagation</span></code>: When called, will stop any further bound callbacks on this particular route from being executed. If two distinct routes are bound that are different, but both happen to match the current hash in some way, this will <em>not</em> keep other routes from receiving notice of the change.</li>
</ul>
<p><code class="docutils literal"><span class="pre">register()</span></code> returns a handle object that can be used to unregister the callback or add additional callbacks to the same route:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/some/path&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">handle</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>

  <span class="nx">handle</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  var handle = router.register(&quot;/some/path&quot;, function(evt){
    // ...
  });

  handle.register(function(evt){
    // ...
  }, true);

  handle.remove();
});</textarea></div><p>The handle&#8217;s <code class="docutils literal"><span class="pre">register()</span></code> function takes an optional second argument of <code class="docutils literal"><span class="pre">isBefore</span></code> which if <code class="docutils literal"><span class="pre">true</span></code> will insert the callback before the current handle&#8217;s callback.  It defaults to <code class="docutils literal"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="registerbefore">
<h3>registerBefore()<a class="headerlink" href="#registerbefore" title="Permalink to this headline">¶</a></h3>
<p>This function works just like <code class="docutils literal"><span class="pre">register()</span></code> but will insert the callback before any other callbacks registered for the same hash pattern.</p>
</div>
<div class="section" id="startup">
<h3>startup()<a class="headerlink" href="#startup" title="Permalink to this headline">¶</a></h3>
<p>Starts up the router and registers for notification of hash changes.</p>
</div>
<div class="section" id="go">
<h3>go()<a class="headerlink" href="#go" title="Permalink to this headline">¶</a></h3>
<p>A convenience function for changing the hash.  It means you do not need to require <code class="docutils literal"><span class="pre">dojo/hash</span></code> directly. It also synchronously fires off any routes that match:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  router.register(&quot;/foo/bar&quot;, function(evt){
    // ...
  });

  router.startup();

  router.go(&quot;/foo/bar&quot;);
});</textarea></div></div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'async: true', version:'' }, width:'700', height:'400', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><p>This example demonstrates the basic usage of <code class="docutils literal"><span class="pre">dojo/router</span></code> by fetching some content on a hash change.</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/request&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/json&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">on</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;request/helloworld.json&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
      <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>

  <span class="nx">on</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;changeHash&quot;</span><span class="p">),</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;, &quot;dojo/dom&quot;, &quot;dojo/on&quot;, &quot;dojo/request&quot;, &quot;dojo/json&quot;, &quot;dojo/domReady!&quot;],
function(router, dom, on, request, JSON){
  router.register(&quot;/foo/bar&quot;, function(evt){
    evt.preventDefault();
    request.get(&quot;request/helloworld.json&quot;, {
      handleAs: &quot;json&quot;
    }).then(function(response){
      dom.byId(&quot;output&quot;).innerHTML = JSON.stringify(response);
    });
  });

  router.startup();

  on(dom.byId(&quot;changeHash&quot;), &quot;click&quot;, function(){
    router.go(&quot;/foo/bar&quot;);
  });
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">id=</span><span class="s">&quot;changeHash&quot;</span><span class="nt">&gt;</span>Change Hash<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;output&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button type=&quot;button&quot; id=&quot;changeHash&quot;&gt;Change Hash&lt;/button&gt;
&lt;div id=&quot;output&quot;&gt;&lt;/div&gt;</textarea></div></div></div></div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="hash.html#dojo-hash"><span>dojo/hash</span></a> - Module for managing the browsers hash.</li>
</ul>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>