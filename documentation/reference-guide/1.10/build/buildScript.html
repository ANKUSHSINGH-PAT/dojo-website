<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>build system build script (build.sh or build.bat) &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="../../../../css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="../../../scripts/dojo/dojo/dojo.js"></script>
    <script src="../../../../scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="../../../../scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="../dojo/index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">build system build script (build.sh or build.bat)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="build-system-build-script-build-sh-or-build-bat">
<span id="build-buildscript"></span><h1><a class="toc-backref" href="#id1">build system build script (build.sh or build.bat)</a><a class="headerlink" href="#build-system-build-script-build-sh-or-build-bat" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Project owner:</th><td class="field-body">Scott Jenkins</td>
</tr>
<tr class="field-even field"><th class="field-name">since:</th><td class="field-body">1.0</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#build-system-build-script-build-sh-or-build-bat" id="id1">build system build script (build.sh or build.bat)</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id3">Usage</a></li>
<li><a class="reference internal" href="#examples" id="id4">Examples</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">build.sh</span></code> (unix) or <code class="docutils literal"><span class="pre">build.bat</span></code> (Windows) script located in the Dojo source distribution tree under <code class="docutils literal"><span class="pre">\\util\buildscripts</span></code> is used to trigger the build process.</p>
<p><strong>Notes</strong></p>
<blockquote>
<div><ul class="simple">
<li>For advanced users, the command line arguments to the script are passed in to the <code class="docutils literal"><span class="pre">build.js</span></code> execution environment as part of the overall <code class="docutils literal"><span class="pre">kwArgs</span></code> object that it receives.</li>
<li>Any of the following parameters can be set directly in the profile file as part of the overall <cite>dependencies</cite> Object</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id3">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The parameters to build are (the value after the equal sign is the default value, if one exists, as of Dojo 1.2.3):</p>
<dl class="docutils">
<dt>cssImportIgnore=</dt>
<dd>If using cssOptimize=&#8221;comments&#8221;, then you can force the &#64;import inlining step to ignore a set of files by using this option. The value of this option should be a comma separated list of CSS files names to ignore. The file names should match whatever strings are used for the &#64;import calls.</dd>
<dt>xdScopeArgs=</dt>
<dd>If the loader=xdomain build option is used, then the value of this option will be used as the arguments to the function that defines the modules in the .xd.js files. This allows for more than one version of the same module to be in a page. See documentation on djConfig.scopeMap for more information.</dd>
<dt>cssOptimize=</dt>
<dd>Specifies how to optimize CSS files. If &#8220;comments&#8221; is specified, then code comments and line returns are stripped, and files referenced via &#64;import are inlined. If &#8220;comments.keepLines&#8221; is specified, then code comments are stripped and &#64;import calls are inlined, but line returns are preserved.</dd>
<dt>releaseName=dojo</dt>
<dd>The name of the release. A directory inside &#8216;releaseDir&#8217; will be created with this name.</dd>
<dt>localeList=ar,ca,cs,da,de-de,el,en-gb,en-us,es-es,fi-fi,fr-fr,he-il,hu,it-it,ja-jp,ko-kr,nl-nl,no,pl,pt-br,pt-pt,ru,sk,sl,sv,th,tr,zh-tw,zh-cn</dt>
<dd>The set of locales to use when flattening i18n bundles.</dd>
<dt>releaseDir=../../release/</dt>
<dd><p class="first">The top level release directory where builds end up. The &#8216;releaseName&#8217; directories will  be placed inside this directory.</p>
<p class="last">Note:  the default value of <code class="docutils literal"><span class="pre">releaseDir</span></code> will place the built Dojo directory tree <em>within</em> the source Dojo distribution tree that the buildscripts directory is a part of.  This is normally not a good behavior if you are including any custom source code modules; in these cases, you will want to override the default with a location outside the source tree.</p>
</dd>
<dt>copyTests=true</dt>
<dd><p class="first">Turn on or off copying of test files.</p>
<p class="last">When off (any non-truthy value&#8211;however <code class="docutils literal"><span class="pre">false</span></code> is your clearest choice), the Dojo test directory is not copied into your release distribution.  This can reduce the overall size of your distribution.</p>
</dd>
<dt>action=help</dt>
<dd><p class="first">The build action(s) to run. Can be a comma-separated list, like action=clean,release. The possible build actions are: clean, release.</p>
<dl class="docutils">
<dt>clean</dt>
<dd>Remove the releaseDir and any contents it may have.</dd>
<dt>release</dt>
<dd>Build the release directories.</dd>
</dl>
<p>Note:  when you specify <code class="docutils literal"><span class="pre">release</span></code>, the <code class="docutils literal"><span class="pre">clean</span></code> option is implied automatically, <em>unless</em> you use the <code class="docutils literal"><span class="pre">buildLayers</span></code> option.</p>
<p class="last">Most of the time, you will specify <code class="docutils literal"><span class="pre">action=release</span></code>.</p>
</dd>
<dt>symbol=</dt>
<dd>Inserts function symbols as global references so that anonymous functions will show up in all debuggers (esp. IE which does not attempt to infer function names from the context of their definition). Valid values are &#8220;long&#8221; and &#8220;short&#8221;. If &#8220;short&#8221; is used, then a symboltables.txt file will be generated in each module prefix&#8217;s release directory which maps the short symbol names to more descriptive names.</dd>
<dt>internStrings=true</dt>
<dd><p class="first">Turn on or off widget template file interning.</p>
<p class="last">Normally, during the build process, one of the things that the builder does is take the separate HTML template files used by templated Dojo widgets (there are many of these in <a class="reference internal" href="../dijit/index.html#dijit-index"><span>Dijit</span></a>) and convert them to inline string values within the as-built source file for the widget (as well as any layers that widget is built into).</p>
</dd>
<dt>scopeMap=</dt>
<dd>Change the default dojo, dijit and dojox scope names to something else. Useful if you want to use Dojo as part of a JS library, but want to make a self-contained library with no external dojo/dijit/dojox references. Format is a string that contains no spaces, and is similar to the djConfig.scopeMap value (note that the backslashes below are required to avoid shell escaping): <code class="docutils literal"><span class="pre">scopeMap=[[\&quot;dojo\&quot;,\&quot;mydojo\&quot;],[\&quot;dijit\&quot;,\&quot;mydijit\&quot;],[\&quot;dojox\&quot;,\&quot;mydojox\&quot;]]</span></code></dd>
<dt>mini=false</dt>
<dd><p class="first">Removes files like tests, demos dijit/bench, unfinished themes, and interned Dijit templates from the build. Overrides the value set for copyTests.</p>
<p>When <code class="docutils literal"><span class="pre">mini=true</span></code> is specified, the smallest possible version of Dojo is generated given the other parameters.  Mini versions are built without the following resources:</p>
<blockquote class="last">
<div><ul class="simple">
<li>tests</li>
<li>demonstrations</li>
<li>partial (unfinished themes)</li>
<li>original template files (since they would have been interned)</li>
</ul>
</div></blockquote>
</dd>
<dt>optimize=</dt>
<dd><p class="first">Specifies how to optimize module files. If &#8220;comments&#8221; is specified, then code comments are stripped. If &#8220;shrinksafe&#8221; is specified, then Dojo Shrinksafe will be used on the files, and line returns will be removed. If &#8220;shrinksafe.keepLines&#8221; is specified, then Dojo Shrinksafe will be used on the files, and line returns will be preserved. If &#8220;packer&#8221; is specified, Then Dean Edwards&#8217; Packer will be used, etc.</p>
<p>Possible values for this parameter are:</p>
<dl class="last docutils">
<dt>shrinksafe</dt>
<dd>Use Shrinksafe in its default mode, where it strips both comments and blank lines</dd>
<dt>shrinksafe.keepLines</dt>
<dd>Use Shrinksafe to remove comments, but leave line breaks as-is, to facilitate human reading of the file (usually for debugging)</dd>
<dt>closure</dt>
<dd>Minify with the Google Closure compiler.  Requires Java 6.</dd>
<dt>uglify</dt>
<dd>Minify with the UglifyJS compiler (version 1.x).  Requires <code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">uglify-js&#64;1</span></code>, in a directory parallel to <code class="docutils literal"><span class="pre">util</span></code>.</dd>
<dt>packer</dt>
<dd><p class="first">Minify with Dean Edwards&#8217; Packer.</p>
<p class="last">Note: the Shrinksafe minification that is used by default is much more effective in most contexts than the Packer minification.  Use this parameter only on servers which do not do their own automatic gzip compression of files being sent.  The packer minification does more extensive name mangling than Shrinksafe and so may cause difficulty in debugging.  The new Google Closure compiler, not included with this distribution, generally provides the best results.</p>
</dd>
</dl>
</dd>
<dt>loader=default</dt>
<dd>The type of dojo loader to use. &#8220;default&#8221; or &#8220;xdomain&#8221; are acceptable values.</dd>
<dt>log=0</dt>
<dd>Sets the logging verbosity. See jslib/logger.js for possible integer values.</dd>
<dt>profileFile=</dt>
<dd>A file path to the profile file. Use this if your profile is outside of the profiles directory. Do not specify the &#8220;profile&#8221; build option if you use &#8220;profileFile&#8221;.</dd>
<dt>xdDojoPath=</dt>
<dd>If the loader=xdomain build option is used, then the value of this option will be used to call dojo.registerModulePath() for dojo, dijit and dojox. The xdDojoPath should be the directory that contains the dojo, dijit and dojox directories, and it should NOT end in a slash. For instance: &#8216;<a class="reference external" href="http://some.domain.com/path/to/dojo090">http://some.domain.com/path/to/dojo090</a>&#8216;.</dd>
<dt>stripConsole=</dt>
<dd>Strips console method calls from JS source. Applied to layers and individual modules resource files. Valid values are &#8220;normal&#8221; (strips all but console.warn and console.error calls), &#8220;all&#8221; (strips all console calls), &#8220;normal,warn&#8221; (strips all but console.error calls), &#8220;normal,error&#8221; (strips all but console.warn errors).</dd>
<dt>version=0.0.0-dev</dt>
<dd><p class="first">The build will be stamped with this version string.  That is, the <code class="docutils literal"><span class="pre">dojo.version</span></code> value specified in the as built version will contain this version number.</p>
<p class="last">This parameter does not affect the names of the directories created by the build system.</p>
</dd>
<dt>profile=</dt>
<dd>The name of the profile to use for the build. It must be the first part of the profile file name in the profiles/ directory. For instance, to use base.profile.js, specify profile=base.</dd>
<dt>layerOptimize=shrinksafe</dt>
<dd>Specifies how to optimize the layer files. If &#8220;comments&#8221; is specified, then code comments are stripped. See the &#8216;optimize&#8217; parameter for possible values.</dd>
<dt>scopeDjConfig=</dt>
<dd>Burn in a djConfig object into the built dojo.js file. Useful if you are making your own scoped dojo and you want a djConfig object local to your version that will not be affected by any globally declared djConfig object in the page. Value must be a string that will look like a JavaScript object literal once it is placed in the built source. use Dojo as part of a JS library, but want to make a self-contained library with no external dojo/dijit/dojox. Example (note that the backslashes below are required to avoid shell escaping if you type this on the command line): <code class="docutils literal"><span class="pre">scopeDjConfig={isDebug:true,scopeMap:[[\&quot;dojo\&quot;,\&quot;mydojo\&quot;],[\&quot;dijit\&quot;,\&quot;mydijit\&quot;],[\&quot;dojox\&quot;,\&quot;mydojox\&quot;]]}</span></code></dd>
<dt>xdDojoScopeName=dojo</dt>
<dd>If the loader=xdomain build option is used, then the value of this option will be used instead of &#8216;dojo&#8217; for the &#8216;dojo._xdResourceLoaded()&#8217; calls that are done in the .xd.js files. This allows for dojo to be under a different scope name but still allow xdomain loading with that scope name.</dd>
<dt>buildLayers=</dt>
<dd>A comma-separated list of layer names to build. Using this option means that only those layers will be built. This helps if you are doing quick development and test cycles with layers. If you have problems using this option, try removing it and doing a full build with action=clean,release. This build option assumes you have done at least one full build first.</dd>
</dl>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="nx">build</span><span class="p">.</span><span class="nx">sh</span> <span class="nx">action</span><span class="o">=</span><span class="nx">release</span><span class="p">,</span><span class="nx">clean</span> <span class="nx">profile</span><span class="o">=</span><span class="nx">myprofile</span> <span class="nx">version</span><span class="o">=</span><span class="mf">1.5</span><span class="p">.</span><span class="mi">0</span> <span class="nx">releaseDir</span><span class="o">=</span><span class="nx">myrelease</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">./build.sh action=release,clean profile=myprofile version=1.5.0 releaseDir=myrelease</textarea></div></div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>