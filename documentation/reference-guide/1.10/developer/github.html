<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dojo Committer Workflow on GitHub &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="../../../../css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="../../../scripts/dojo/dojo/dojo.js"></script>
    <script src="../../../../scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="../../../../scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="../dojo/index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="../dojox/index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">Dojo Committer Workflow on GitHub</a><ul>
<li><a class="reference internal" href="#the-main-components">The Main Components</a><ul>
<li><a class="reference internal" href="#contributor-workflow">Contributor Workflow</a></li>
<li><a class="reference internal" href="#accept-a-pull-request-workflow">Accept a Pull Request Workflow</a></li>
<li><a class="reference internal" href="#backporting-workflow">Backporting Workflow</a></li>
<li><a class="reference internal" href="#individual-workflow">Individual Workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojo-committer-workflow-on-github">
<span id="developer-github"></span><h1><a class="toc-backref" href="#id1">Dojo Committer Workflow on GitHub</a><a class="headerlink" href="#dojo-committer-workflow-on-github" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-committer-workflow-on-github" id="id1">Dojo Committer Workflow on GitHub</a><ul>
<li><a class="reference internal" href="#the-main-components" id="id2">The Main Components</a></li>
</ul>
</li>
</ul>
</div>
<p>This document will provide guidelines for the Dojo Toolkit workflow on GitHub for a committer.  As we will no longer be
using SVN, it is important to adjust our workflow to match to GitHub.</p>
<div class="section" id="the-main-components">
<h2><a class="toc-backref" href="#id2">The Main Components</a><a class="headerlink" href="#the-main-components" title="Permalink to this headline">¶</a></h2>
<p>The main GitHub Repositories for the Dojo 1.X code are:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/dojo/dojo">dojo/dojo</a></li>
<li><a class="reference external" href="https://github.com/dojo/dijit">dojo/dijit</a></li>
<li><a class="reference external" href="https://github.com/dojo/dojox">dojo/dojox</a></li>
<li><a class="reference external" href="https://github.com/dojo/util">dojo/util</a></li>
</ul>
<p>You will need a valid GitHub user account.  This should be tied to your Dojo Foundation user account and you should have
appropriate access to the Dojo Toolkit repositories.  This can be done by contacting one of the Toolkit project leads.</p>
<p>You will need the appropriate tools to manage your GitHub code.  There are a few choices, but the two main ones are the
standard <code class="docutils literal"><span class="pre">git</span></code> command line or the GitHub GUI:</p>
<ul class="simple">
<li><a class="reference external" href="http://git-scm.com/downloads">git</a></li>
<li><a class="reference external" href="http://mac.github.com/">GitHub Mac</a></li>
<li><a class="reference external" href="http://windows.github.com/">GitHub Windows</a></li>
</ul>
<p>The examples in this document though will focus around using the <code class="docutils literal"><span class="pre">git</span></code> command line interface.  If you need help
setting up <code class="docutils literal"><span class="pre">git</span></code> to work against your GitHub account, please see the
<a class="reference external" href="https://help.github.com/articles/set-up-git">GitHub Help Article</a> about the topic.</p>
<p>You should ensure that your <code class="docutils literal"><span class="pre">git</span></code> information is using your real name and an appropriate e-mail address (preferably
your GitHub one).  This is very important to make sure that commits are attributed properly when authoring and other
functions are used with <code class="docutils literal"><span class="pre">git</span></code>.</p>
<p>You also should be aware we continue to use <a class="reference external" href="http://bugs.dojotoolkit.org">bugs.dojotoolkit.org</a> for ticket management.
While GitHub issues have improved, they still do not give us sufficient features to be able to manage the code as we
would like.</p>
<div class="section" id="contributor-workflow">
<h3>Contributor Workflow<a class="headerlink" href="#contributor-workflow" title="Permalink to this headline">¶</a></h3>
<p>This is documented in the <a class="reference external" href="https://github.com/dojo/dojo/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> which provides
the contribution guidelines for the Toolkit as well as a well defined workflow for submitting Pull Requests to the
repositories.</p>
<p>As a committer, you should use the contribution workflow for landing non-trival changes in areas which you are not
directly responsible for, or you want/need to have a level of peer review prior to the change being merged.</p>
<p>If you prefer the command line, there are several tools which can issue pull requests from the command line.  The most
feature rich appears to be <a class="reference external" href="https://github.com/defunkt/hub">hub</a> which also provide many other features that make
command line integration with GitHub easier.</p>
<p>Also, since generally you want to be rebasing to avoid merge commits, you may want to set it so that <code class="docutils literal"><span class="pre">git</span> <span class="pre">pull</span></code> is
always a rebase pull:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global --bool pull.rebase true
</pre></div>
</div>
<p>What this will do though is make <code class="docutils literal"><span class="pre">git</span></code> complain when you have unstaged changes.  You will have to commit or stash them
before you can do a <code class="docutils literal"><span class="pre">git</span> <span class="pre">pull</span></code> then.</p>
<p>If all you are going to do is make your commits, there is no need to follow that workflow.  Instead you should just
follow the <a class="reference internal" href="#accept-a-pull-request-workflow">Accept a Pull Request Workflow</a> below.</p>
</div>
<div class="section" id="accept-a-pull-request-workflow">
<h3>Accept a Pull Request Workflow<a class="headerlink" href="#accept-a-pull-request-workflow" title="Permalink to this headline">¶</a></h3>
<p>To accept a pull request, you should be working off a local repository whose remote <code class="docutils literal"><span class="pre">origin</span></code> is the
<code class="docutils literal"><span class="pre">github.com/dojo/</span></code> repository you will be accepting the pull request into.  Pull requests should be merged into the
<cite>master</cite> branch of code once you are comfortable the pull request applies cleanly, meets coding standards and passes
appropriate tests.</p>
<p>You will need to know the remote repository and branch that the pull request originates from.  This is identifiable via
the pull request in GitHub by clicking the <code class="docutils literal"><span class="pre">command</span> <span class="pre">line</span></code> link in the &quot;merge&quot; box.  You should also assign the Pull
Request to yourself to avoid any confusion that you are working on the Pull Request.</p>
<p>First, make sure you have checked out the correct branch that the pull request is going to land in (typically
<code class="docutils literal"><span class="pre">master</span></code>) and that it is up-to-date:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git checkout master &amp;&amp; git pull origin master
</pre></div>
</div>
<p>Then, retrieve the Pull Request, squashing it into a single atomic changeset:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git pull --no-rebase --squash --no-commit git://github.com/username/dojo.git t12345
</pre></div>
</div>
<p>The changes from the pull request will be pulled into your working directory, staged to be committed. You can now review
the changes and do whatever testing and fix-ups are necessary before committing.</p>
<p>When committing, please ensure that in your commit message you reference the appropriate ticket(s). You should also
commit with the appropriate author attribution, like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git commit --author=&quot;Some Contributor &lt;some@example.com&gt;&quot;
</pre></div>
</div>
<p>Once you have committed the changes, push them upstream:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git push origin master
</pre></div>
</div>
<p>GitHub will not auto-close the pull request because the commits that landed do not match the ones in the pull request,
so you will need to manually close it with a comment containing a reference to the real commit.</p>
</div>
<div class="section" id="backporting-workflow">
<h3>Backporting Workflow<a class="headerlink" href="#backporting-workflow" title="Permalink to this headline">¶</a></h3>
<p>You may find a need to apply commits to older branches of code.  If the change can be applied cleanly, it is often
useful to &quot;cherry-pick&quot; commits from the other branch.  This provides the benefits of sharing the same commit message
information without creating unnecessary &quot;commit noise&quot;.</p>
<p>For example if you were going to take a commit from the <code class="docutils literal"><span class="pre">master</span></code> branch and bring it into the <code class="docutils literal"><span class="pre">1.7</span></code> branch, it would
look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git checkout -b 1.7 origin/1.7
$ git cherry-pick -x e7b779e5475633f51f2390aa19cc7f0a7cf42c89
$ git push origin 1.7
</pre></div>
</div>
<p>This <code class="docutils literal"><span class="pre">-x</span></code> will modify the commit message so that it is clear that the commit has been cherry picked and will provide
a reference in the commit message to the original commit.</p>
</div>
<div class="section" id="individual-workflow">
<h3>Individual Workflow<a class="headerlink" href="#individual-workflow" title="Permalink to this headline">¶</a></h3>
<p>This is when you as a committer are making changes which you do not need additional feedback, are for areas of the code
you are responsible for or are trivial in nature.  The &quot;traditional&quot; guidelines apply in these situations:</p>
<ul class="simple">
<li>You should always reference the ticket in the commit message (using &quot;fixes&quot; and &quot;refs&quot; as appropriate).</li>
<li>Only defect-fixes go into release branches, new features go into the <code class="docutils literal"><span class="pre">master</span></code> branch.</li>
<li>The unnecessary commit noise should be avoided.  Rebase if needed.</li>
</ul>
<p>If you are working locally and you have several commits now that you want to &quot;squash&quot; into a single commit to represent
your changes, you can do so by using the interactive rebase feature of <code class="docutils literal"><span class="pre">git</span></code>.  More information on this can be found
in <a class="reference external" href="http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages">Changing Multiple Commit Messages</a>.  <strong>Warning</strong> do not rebase commits which you have already pushed to GitHub.  This will cause conflicts and if others
have become dependent on your commits, it will cause no end of carnage and swearing.</p>
<p>For a more explicit example, you should start with ensuring you are up to date:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git checkout master &amp;&amp; git pull origin master
</pre></div>
</div>
<p>Even though your plan would be to push directly to the origin repository, you might still benefit from working on your
code in a feature branch.  This could allow you to work on multiple things independently without having to worry about
picking through the changes:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git checkout -b t12345
</pre></div>
</div>
<p><em>Note</em> do not push your feature branch upstream.  It will cause severe embarrassment and ridicule.</p>
<p>Then you make all of your changes and then commit them.  Be responsible in the number of commits you make.  Generally a
single ticket should be a single atomic commit, which includes all the ancillary changes like test cases.  If through
the development you do not have a single atomic commit, you should <code class="docutils literal"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span></code>.  Rebasing is a complex topic and
is covered in the <a class="reference external" href="http://git-scm.com/book/en/Git-Branching-Rebasing">Git Rebasing</a> article as well as the article
mentioned above.</p>
<p>If you have made your changes and are staged and you are making a single commit, all you need to do is commit with an
appropriate comment:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git commit -m &quot;Resolve a defect, fixes #12345&quot;
</pre></div>
</div>
<p><em>Note</em> How you have <code class="docutils literal"><span class="pre">git</span></code> setup means that if you omit the <code class="docutils literal"><span class="pre">-m</span></code> directive, it will open a file in your chosen text
editor for you to edit a commit message.</p>
<p>Now you just need to push your changes upstream.  If you were on a feature branch:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git push origin t12345:master
</pre></div>
</div>
<p>If you were on <code class="docutils literal"><span class="pre">master</span></code>, you should just:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git push origin master
</pre></div>
</div>
</div>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>