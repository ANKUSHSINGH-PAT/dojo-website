<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.treemap &mdash; Dojo Reference Guide 1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css?1">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <meta name="viewport" content="width=device-width, minimum-scale=0.75, maximum-scale=1">
    <meta name="format-detection" content="telephone=no">
    <script src="/scripts/dojo/dojo/dojo.js?1"></script>
    <script src="/scripts/dojo/docs/guide.js?1"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css?1">
    <script src="/scripts/nav.js?1"></script>

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo icon-dojo icon"></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="/download/" class="downloadLink">Get Dojo</a></li>
					<li><a href="/documentation" class="docsLink">Docs</a></li>
					<li><a href="/community" class="communityLink">Community</a></li>
					<li><a href="/community/roadmap/" class="roadmapLink">Roadmap</a></li>
					<li><a href="/blog/" class="blogLink">Blog</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <div class="subnav">
      <div class="row">
        <div class="medium-12 columns">
         <ul>
            <li><a href="../index.html">Startpage</a></li>
            <li><a href="../dojo/index.html">Dojo</a></li>
            <li><a href="../dijit/index.html">Dijit</a></li>
            <li><a href="index.html">DojoX</a></li>
          </ul>
        </div>
        <!-- <div class="medium-3 columns text-right">
           <div id="dtkVersion">
            <select id="refver" name="refver">
              <option value="1.6">Dojo 1.6</option>
              <option value="1.7">Dojo 1.7</option>
              <option value="1.8">Dojo 1.8</option>
              <option value="1.9">Dojo 1.9</option>
              <option value="1.10" selected="selected">Dojo 1.10</option>
            </select>
          </div>
        </div>-->
      </div>
    </div>
  <main class="refguide">
    <div class="row">
      <div class="medium-9 columns content">
          
  <div class="section" id="dojox-treemap">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.treemap</a><a class="headerlink" href="#dojox-treemap" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">1.8</td>
</tr>
<tr class="field-even field"><th class="field-name">authors:</th><td class="field-body">Christophe Jolif</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-treemap" id="id2">dojox.treemap</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#creating-a-treemap-widget" id="id4">Creating a treemap widget</a></li>
<li><a class="reference internal" href="#configuring-treemap-data" id="id5">Configuring treemap data</a></li>
<li><a class="reference internal" href="#configuring-treemap-properties" id="id6">Configuring treemap properties</a></li>
<li><a class="reference internal" href="#styling-the-treemap" id="id7">Styling the treemap</a></li>
<li><a class="reference internal" href="#user-interactions" id="id8">User interactions</a></li>
<li><a class="reference internal" href="#using-alternate-rendering-mixins" id="id9">Using alternate rendering mixins</a></li>
<li><a class="reference internal" href="#managing-treemap-events" id="id10">Managing treemap events</a></li>
<li><a class="reference internal" href="#see-also" id="id11">See also</a></li>
</ul>
</li>
</ul>
</div>
<p>This page describes how to use and configure the Dojo Treemap.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Treemaps display data as a set of colored, potentially nested, rectangular cells. Treemaps can be used to explore large data sets by using convenient drill-down capabilities.
They reveal data patterns and trends easily. Treemaps rely on data clustering, using areas and color information to represent the data you want to explore.</p>
<p>An example of a treemap is shown below. The treemap shows business sectors at the head of the hierarchy and provides the possibility to drill down to country and then company level.</p>
<p>Dojo Treemap supports squarified algorithms for two-dimensional treemaps, and is characterized by the ability to:</p>
<blockquote>
<div><ul class="simple">
<li>Map the size, color, and label of treemap cells to properties in a data store.</li>
<li>Choose either a predefined algorithm for computing the item colors or specify a color using a customizable color function.</li>
<li>Specify the treemap levels at which labels are to appear.</li>
<li>Get an event when clicking and hovering over treemap items.</li>
<li>Navigate within a treemap with visual effects on drill down.</li>
</ul>
</div></blockquote>
<p><strong>Note</strong>: The treemap is not supported on Internet Explorer 6. On IE7 and above a standard doctype must be set on the page that includes the treemap.</p>
<img alt="../_images/treemap.png" src="../_images/treemap.png" />
</div>
<div class="section" id="creating-a-treemap-widget">
<h2><a class="toc-backref" href="#id4">Creating a treemap widget</a><a class="headerlink" href="#creating-a-treemap-widget" title="Permalink to this headline">¶</a></h2>
<p>You can create a TreeMap widget either using JavaScript or using HTML markup. The following two examples create the exact same treemap.
Do not forget to include the default TreeMap CSS to get the expected default rendering.</p>
<p>In JavaScript:</p>
<p>In HTML markup:</p>
<p>You might want to listen to store query errors, for that you can use the promise returned by the store setter:</p>
</div>
<div class="section" id="configuring-treemap-data">
<h2><a class="toc-backref" href="#id5">Configuring treemap data</a><a class="headerlink" href="#configuring-treemap-data" title="Permalink to this headline">¶</a></h2>
<p>The TreeMap can connect to any implementation of the dojo.store.api.Store interface that implements get/query and id management (getIdentity). It supports flat data and optionally creates a hierarchy from this data
using attributes of the data to group them based on certain criteria.</p>
<div class="section" id="mapping-using-attributes">
<h3>Mapping using attributes<a class="headerlink" href="#mapping-using-attributes" title="Permalink to this headline">¶</a></h3>
<p>In this example the data are mapped from the data store using an attribute based mapping. That means the cell size and color as well as the grouping are extracted from attributes value in the data.</p>
<p>For the cell colors in the value of the binding is used as an input into the specified color model. In this case this is a color model that returns a color interpolated between the red and
green colors with a mean neutral value. One can specify his one color model like a similar one based on average neutral value instead of mean neutral. If no color model is specified at all
the color is expected to be found directly in the value of the colorAttr binding as a suitable input for the dojo/Color constructor.</p>
<p>Note also that the groupAttrs property is of type array instead of just a single attribute. This allows one to specify several attributes for grouping thus creating a multi-level hierarchy. As for
example:</p>
<dl class="docutils">
<dt>Other binding attributes are available:</dt>
<dd><ul class="first last simple">
<li>the labelAttr that binds the cell labels to a data attribute.</li>
<li>the tooltipAttr that binds the cell tooltips to a data attribute.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="mapping-using-custom-functions">
<h3>Mapping using custom functions<a class="headerlink" href="#mapping-using-custom-functions" title="Permalink to this headline">¶</a></h3>
<p>In this example the data are mapped from the data store using custom functions. That means the cell size and color as well as the grouping are computed by functions specified by the application.</p>
<p>The example is very similar to the previous one, except that it is using a function to compute the input value for the cells color. In this case instead of using the absolute profit figure
we are computing the profit percentage.</p>
<p>The example is also leveraging the query attribute that allows to reduce the scope of the query made onto the data store in order to extract a subset of the data. Here we are choosing only
data items with sales above a given threshold.</p>
<p>Obviously functions are also supported for binding areas, labels or tooltips.</p>
</div>
</div>
<div class="section" id="configuring-treemap-properties">
<h2><a class="toc-backref" href="#id6">Configuring treemap properties</a><a class="headerlink" href="#configuring-treemap-properties" title="Permalink to this headline">¶</a></h2>
<p>In addition to the mapping properties the TreeMap widget provides other interesting properties.</p>
<blockquote>
<div><ul class="simple">
<li>the labelThreshold property corresponds to the maximum depth level at which labels will be displayed. If you want no labels to be displayed, choose 0, if you want only top level labels choose 1 and so on.</li>
<li>the selectionMode property corresponds to the type of selection you want to enable on the treemap, possible values are &#8220;multiple&#8221;, &#8220;single&#8221; or &#8220;none&#8221;.</li>
<li>the selectedItems property is the array of selected items. If you want to select only a single item you can alternatively used selectedItem property.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="styling-the-treemap">
<h2><a class="toc-backref" href="#id7">Styling the treemap</a><a class="headerlink" href="#styling-the-treemap" title="Permalink to this headline">¶</a></h2>
<p>The TreeMap widget generates HTML markup that can be styled using CSS. The treemap provides a default TreeMap.css that must be included in your application. Alternate rendering can be achieved by overriding some of the CSS rules and using the classes put by the treemap on the HTML elements.</p>
<dl class="docutils">
<dt>The following example shows how to:</dt>
<dd><ul class="first last simple">
<li>center the labels</li>
<li>change the font size</li>
<li>use rounded corners on treemap cells (HTML5 browsers only)</li>
</ul>
</dd>
</dl>
<p>Other styling can be performed like changing selection border color or adding margins between the cells.</p>
<p>The following CSS class are available for that purpose:</p>
<blockquote>
<div><ul class="simple">
<li>dojoxTreeMap: the TreeMap widget class</li>
<li>dojoxTreeMapLeaf: the TreeMap leaf cells class</li>
<li>dojoxTreeMapGroup: the TreeMap grouping div class which contains:<ul>
<li>dojoxTreeMapHeader: the TreeMap grouping div header class.</li>
<li>dojoxTreeMapHeader_*level*: the class for header of level <em>level</em>.</li>
<li>dojoxTreeMapGroupContent: the TreeMap grouping div content class.</li>
<li>dojoxTreeMapGroupContent_*level*: the class for content of level <em>level</em>.</li>
</ul>
</li>
<li>dojoxTreeMapSelected: for selected TreeMap cells.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="user-interactions">
<h2><a class="toc-backref" href="#id8">User interactions</a><a class="headerlink" href="#user-interactions" title="Permalink to this headline">¶</a></h2>
<p>By default the TreeMap widget only provide mouse &amp; touch selection interaction. In this default configuration the following selection actions are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Function</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Select</td>
<td>Click a cell in the treemap</td>
</tr>
<tr class="row-odd"><td>Extend a selection</td>
<td>Hold down the CTRL key an click a cell</td>
</tr>
<tr class="row-even"><td>Reduce a selection</td>
<td>Hold down the CTRL key and click an already selected cell</td>
</tr>
</tbody>
</table>
<p>Other interaction must be explicitly mixed in the TreeMap in order to be available.</p>
<p>To get drill down ability on double click or double tap:</p>
<p>To get keyboard interaction:</p>
<p>Which enable the following actions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Keyboard</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Right/left arrow keys</td>
<td>Select a neighboring item that shares the same parent item.</td>
</tr>
<tr class="row-odd"><td>Up/down arrow keys</td>
<td>Move up or down in the hierarchy to select a parent or child item.</td>
</tr>
<tr class="row-even"><td>Plus key (+)</td>
<td>Drill down the treemap</td>
</tr>
<tr class="row-odd"><td>Minus key (-)</td>
<td>Drill up the treemap</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-alternate-rendering-mixins">
<h2><a class="toc-backref" href="#id9">Using alternate rendering mixins</a><a class="headerlink" href="#using-alternate-rendering-mixins" title="Permalink to this headline">¶</a></h2>
<p>By default each cell is drawn with a fixed size label. As demonstrated in the Styling the treemap one can leverage CSS to change the default rendering like changing the font size. However some
more complex customization might not be possible with CSS, that&#8217;s why the TreeMap widget conveniently propose classes that can be mixed in the TreeMap class and will provide alternate rendering.</p>
<p>The first rendering mixin is the GroupLabel mixin. It allows to remove cell labels and only keep group labels centered on the groups:</p>
<p>The second rendering mixin is the ScaledLabel mixin. It allows to scale the cell labels so that they fill as much as possible the cells size:</p>
</div>
<div class="section" id="managing-treemap-events">
<h2><a class="toc-backref" href="#id10">Managing treemap events</a><a class="headerlink" href="#managing-treemap-events" title="Permalink to this headline">¶</a></h2>
<p>The TreeMap widget is firing the following events:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>itemRollOver</td>
<td>Indicates that the user rolled the pointer over a cell in the treemap.</td>
</tr>
<tr class="row-odd"><td>itemRollOut</td>
<td>Indicates that the user rolled the pointer over a cell in the treemap.</td>
</tr>
<tr class="row-even"><td>change</td>
<td>Indicates that the selection of a treemap cell has changed (i.e. it has been selected or deselected)</td>
</tr>
<tr class="row-odd"><td>rendererUpdated</td>
<td>Indicates that a given treemap cell renderer has been updated</td>
</tr>
</tbody>
</table>
<p>One can listen to this events and react to them. For example, the following code output the name of the latest selected item in the DOM:</p>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id11">See also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>A demo is leveraging the Dojo treemap to explore Dojo Trac bug base. Check it out <a class="reference external" href="http://demos.dojotoolkit.org/demos/tracTreemap/">here</a>.</li>
</ul>
</div></blockquote>
</div>
</div>


      </div>
      <div class="medium-3 columns">
        <div id="toc">
            <h3>Table of Contents</h3>
            <div class="tocList"><ul>
<li><a class="reference internal" href="#">dojox.treemap</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#creating-a-treemap-widget">Creating a treemap widget</a></li>
<li><a class="reference internal" href="#configuring-treemap-data">Configuring treemap data</a><ul>
<li><a class="reference internal" href="#mapping-using-attributes">Mapping using attributes</a></li>
<li><a class="reference internal" href="#mapping-using-custom-functions">Mapping using custom functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-treemap-properties">Configuring treemap properties</a></li>
<li><a class="reference internal" href="#styling-the-treemap">Styling the treemap</a></li>
<li><a class="reference internal" href="#user-interactions">User interactions</a></li>
<li><a class="reference internal" href="#using-alternate-rendering-mixins">Using alternate rendering mixins</a></li>
<li><a class="reference internal" href="#managing-treemap-events">Managing treemap events</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>
</div>
          </div>
      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-12 columns feedback">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
    </div>
  </div>
  <div class="row full footer">
	<div class="content">
		<div class="medium-6 columns copyright">
			<span>&copy; <a href="http://dojofoundation.org">The Dojo Foundation</a>, All Rights Reserved. <a href="https://raw.githubusercontent.com/dojo/dojo/master/LICENSE" class="license">License Information</a></span>
		</div>
		<div class="medium-6 columns info">
			<span>Internet Application Management Provided By <a href="http://www.reliam.com/">Reliam, Inc.</a></span>
		</div>
	</div>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');
	</script>
</div>
  
  </body>
</html>