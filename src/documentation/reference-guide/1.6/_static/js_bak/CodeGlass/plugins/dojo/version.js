/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["CodeGlass.plugins.dojo.version"]){dojo._hasResource["CodeGlass.plugins.dojo.version"]=true;dojo.provide("CodeGlass.plugins.dojo.version");dojo.require("CodeGlass.plugins._base");dojo.declare("CodeGlass.plugins.dojo.version",CodeGlass.plugins._baseTemplated,{injectNode:null,templateString:"<div class=\"menuItem version\">Version: <select dojoAttachEvent=\"onchange: _changeVersion\" dojoAttachPoint=\"versionInput\"></select></div>",baseUrls:[{baseUrl:"http://ajax.googleapis.com/ajax/libs/dojo/1.6/",label:"1.6 (CDN)",xDomain:true,version:"1.6"},{baseUrl:"http://ajax.googleapis.com/ajax/libs/dojo/1.5/",label:"1.5 (CDN)",xDomain:true,version:"1.5"},{baseUrl:"http://ajax.googleapis.com/ajax/libs/dojo/1.4/",label:"1.4 (CDN)",xDomain:true,version:"1.4"},{baseUrl:"http://ajax.googleapis.com/ajax/libs/dojo/1.3/",label:"1.3 (CDN)",xDomain:true,version:"1.3"},{baseUrl:"http://ajax.googleapis.com/ajax/libs/dojo/1.2/",label:"1.2 (CDN)",xDomain:true,version:"1.2"},{baseUrl:dojo.config.baseUrl+"../../",label:"Trunk (slow)",xDomain:false,version:"trunk"}],baseUrl:"",baseUrlIndex:0,version:"",djConfig:"parseOnLoad: true",injectToolbar:"toolbarBottom",postCreate:function(){if(this.version.length){var v=this.version.split("-"),_1=v[0]>"0"?v[0]:"0",_2=v[1]?v[1]:null;}var _3=-1;this.suppVersions=[];if(typeof (CodeGlassConfig)!="undefined"&&typeof (CodeGlassConfig.baseUrls)!="undefined"){this.baseUrls=this.baseUrls.concat(CodeGlassConfig.baseUrls);}dojo.forEach(this.baseUrls,function(_4,i){if((!_1||_4.version>=_1)&&(!_2||_4.version<=_2)||!_4.version){this.suppVersions.push(i);++_3;}},this);this.baseUrlIndex=this.suppVersions[0];dojo.forEach(this.suppVersions,function(_5){dojo.create("option",{innerHTML:this.baseUrls[_5].label,value:_5},this.versionInput);},this);this.versionInput.selectedIndex=0;this.sharedVars.djConfig=[];this._setSharedVars();},getVars:function(){var _6=[];for(var _7 in this.sharedVars.djConfig){_6.push(this.sharedVars.djConfig[_7]);}return {injectToolbar:this.injectToolbar,iframeProps:{"baseUrl":this.baseUrls[this.baseUrlIndex].baseUrl,"baseUrlIndex":this.baseUrlIndex,"customJavaScript":"<scr"+"ipt src=\""+this.baseUrls[this.baseUrlIndex].baseUrl+"dojo/dojo"+(this.baseUrls[this.baseUrlIndex].xDomain?".xd":"")+".js\" djConfig=\""+_6.join(",")+"\"><"+"/scr"+"ipt>"}};},_setSharedVars:function(){this.sharedVars.baseUrlIndex=this.baseUrlIndex;this.sharedVars.baseUrl=this.baseUrls[this.baseUrlIndex].baseUrl;this.sharedVars.djConfig["version"]=this.djConfig;},_changeVersion:function(){this.baseUrlIndex=this.versionInput.value;this.baseUrl=this.baseUrls[this.baseUrlIndex].baseUrl;this._setSharedVars();dojo.publish("CodeGlass/plugin/change/"+this.codeGlassBaseId,["dojo.version"]);}});}