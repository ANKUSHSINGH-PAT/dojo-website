<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Demo: dojox.form.Manager</title>
		<link rel="stylesheet" href="style.css" media="screen">
		<link rel="stylesheet" href="../../../resources/style/demo.css" media="screen">
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css">
	</head>
	<body class="claro">

	<div dojoType="dijit.layout.BorderContainer" design="sidebar" gutters="false" liveSplitters="false" style="height: 50em;">
		<div dojoType="dijit.layout.ContentPane" region="left" splitter="true" style="width: 15em;">
			<table id="result" border="1">
				<thead>
					<th>Name</th>
					<th>Value</th>
				</thead>
				<tbody id="table"></tbody>
			</table>
			<p>
				<input type="checkbox" id="c01" name="c01" value="c01" checked="checked">
				&nbsp;<label for="c01">enable the form elements</label>
				<br>
				<input type="checkbox" id="c02" name="c02" value="c02">
				&nbsp;<label for="c02">add/remove background</label>
				<br>
				<input type="checkbox" id="c03" name="c03" value="c03" checked="checked">
				&nbsp;<label for="c03">show form elements</label>
				<br>
				<input type="checkbox" id="c04" name="c04" value="c04" checked="checked">
				&nbsp;<label for="c04">show form widgets</label>
			</p>
		</div>
		<div dojoType="dijit.layout.ContentPane" region="center" splitter="true" style="width: 50em;">
			<h1>Demo: dojox.form.Manager</h1>
			<p>
			Make sure you open Firebug / Consoles to see all of the form values change!
			</p>
			<form dojoType="dojox.form.Manager" id="form">
				<fieldset dojoAttachPoint="part1">
					<legend>HTML form elements</legend>
					<div>
						<input type="checkbox" id="e01" name="e01" value="e01" observer="showValues, logRadio">
						&nbsp;<label for="e01">e01 input/checkbox</label>
					</div>
					<div>
						<input type="radio" id="e021" name="e02" value="e02-1" observer="showValues">
						&nbsp;<label for="e021">e02-1 input/radio</label>
						&nbsp;
						<input type="radio" id="e022" name="e02" value="e02-2" checked="checked">
						&nbsp;<label for="e022">e02-2 input/radio</label>
					</div>
					<div>
						<input type="text" id="e03" name="e03" value="e03" observer="showValues">
						&nbsp;<label for="e03">e03 input/text</label>
					</div>
					<div>
						<input type="password" id="e04" name="e04" value="e04" observer="showValues">
						&nbsp;<label for="e04">e04 input/password</label>
					</div>
					<div>
						<input type="hidden" id="e05" name="e05" value="e05" observer="showValues">
						&nbsp;<label for="e05">e05 input/hidden</label>
					</div>
					<div>
						<select id="e06" name="e06" observer="showValues">
							<option value="e06-1">e06-1 first</option>
							<option value="e06-2" selected="selected">e06-2 second</option>
						</select>
						&nbsp;<label for="e06">e06 select</label>
					</div>
					<div>
						<label for="e07">e07 textarea</label><br>
						<textarea id="e07" name="e07" observer="showValues"
							rows="3" cols="15" style="width: 15em;">e07</textarea>
					</div>
					<div>
						<button name="e08" observer="showValues">e08 button</button>&nbsp;
						<input type="button" name="e09" value="e09 input/button" observer="showValues">&nbsp;
						<input type="reset" name="e10" value="e10 input/reset" observer="showValues">&nbsp;
						<input type="submit" name="e11" value="e11 input/submit" observer="showValues">
					</div>
				</fieldset>
				<fieldset dojoAttachPoint="part2">
					<legend>Dijit form widgets</legend>
					<div>
						<input type="checkbox" dojoType="dijit.form.CheckBox" id="w01" name="w01" value="w01" observer="showValues">
						&nbsp;<label for="w01">w01 input/checkbox dijit.form.CheckBox</label>
					</div>
					<div>
						<input type="radio" dojoType="dijit.form.RadioButton" id="w021" name="w02" value="w02-1" observer="showValues">
						&nbsp;<label for="w021">w02-1 input/radio dijit.form.RadioButton</label>
						&nbsp;
						<input type="radio" dojoType="dijit.form.RadioButton" id="w022" name="w02" value="w02-2" checked="checked" observer="logRadio">
						&nbsp;<label for="w022">w02-2 input/radio dijit.form.RadioButton</label>
					</div>
					<div>
						<input type="text" dojoType="dijit.form.TextBox" id="w03" name="w03" value="w03" observer="showValues" intermediateChanges="true">
						&nbsp;<label for="w03">w03 input/text dijit.form.TextBox with intermediateChanges="true"</label>
					</div>
					<div>
						<input type="password" dojoType="dijit.form.TextBox" id="w04" name="w04" value="w04" observer="showValues" intermediateChanges="false">
						&nbsp;<label for="w04">w04 input/password dijit.form.TextBox with intermediateChanges="false"</label>
					</div>
					<div>
						<select dojoType="dijit.form.Select" id="w06" name="w06" observer="showValues">
							<option value="w06-1">w06-1 first</option>
							<option value="w06-2" selected="selected">w06-2 second</option>
						</select>
						&nbsp;<label for="w06">w06 select dijit.form.Select</label>
					</div>
					<div>
						<label for="w07">w07 textarea dijit.form.SimpleTextarea with intermediateChanges="true"</label><br>
						<textarea dojoType="dijit.form.SimpleTextarea" id="w07" name="w07" observer="showValues"
							rows="3" cols="15" style="width: 15em;" intermediateChanges="true">w07</textarea>
					</div>
					<div>
						<button dojoType="dijit.form.Button" name="w08" observer="showValues">w08 button</button>&nbsp;
						<button type="button" dojoType="dijit.form.Button" name="w09" observer="showValues">w09 type=button</button>&nbsp;
						<button type="reset" dojoType="dijit.form.Button" name="w10" observer="showValues">w10 type=reset</button>&nbsp;
						<button type="submit" dojoType="dijit.form.Button" name="w11" observer="showValues">w11 type=submit</button>
					</div>
				</fieldset>
				<script type="dojo/method" data-dojo-event="onSubmit">
					// do not submit this form
					return false;
				</script>
				<script type="dojo/method" data-dojo-event="logRadio">
					// sample observer: logs radio buttons by name
					var values = this.gatherFormValues(["e02", "w02"]);
					console.log("e02: " + values.e02 + ", w02: " + values.w02);
				</script>
				<script type="dojo/method" data-dojo-event="showValues" data-dojo-args="value,name">
					console.log("name: " + name + ", value: " + value);
					// clear any hilited cells
					dojo.query("tr.hilite", dojo.byId("table")).forEach(function(node){
						dojo.removeClass(node, "hilite");
					});
					// get the node of the table row used to display the value for this input
					var rowNode = dojo.byId("tr" + name);
					// hilite the node
					dojo.addClass(rowNode, "hilite");
					// update the value displayed
					dojo.query("td.value", rowNode).forEach(function(node){
						var textNode = document.createTextNode(value.toString());
						dojo.place(textNode, node, "only");
					});
				</script>
			</form>
		</div>
	</div>
	<!-- load dojo and provide config via data attribute -->
	<script src="//ajax.googleapis.com/ajax/libs/dojo/1.6.3/dojo/dojo.xd.js"
		data-dojo-config="parseOnLoad: true, isDebug: true">
	</script>

	<script>

		dojo.require("dijit.form.Button");
		dojo.require("dijit.form.CheckBox");
		dojo.require("dijit.form.RadioButton");
		dojo.require("dijit.form.TextBox");
		dojo.require("dijit.form.ComboBox");
		dojo.require("dijit.form.SimpleTextarea");
		dojo.require("dijit.form.Select");

		dojo.require("dojox.form.Manager");

		dojo.require("dijit.layout.BorderContainer");
		dojo.require("dijit.layout.ContentPane");

		dojo.require("dojo.parser");
		dojo.ready(function(){
			controlHandler = function(evt){
				switch(evt.target.id){
					case "c01":
						form[this.checked ? "enable" : "disable"]();
						break;
					case "c02":
						form[this.checked ? "addClass" : "removeClass"]("makeYellow", ["part1", "part2"]);
						break;
					case "c03":
						form[this.checked ? "show" : "hide"](["part1"]);
						break;
					case "c04":
						form[this.checked ? "show" : "hide"](["part2"]);
				}
			};
			// get the form widget
			var form = dijit.byId("form");
			// query for all the inputs whose name begins with e (for element) or w (for widget)
			var names = [];
			dojo.query("[name^=e], [name^=w]", dojo.byId("form")).forEach(function(node){
				if(dojo.indexOf(names, node.name) === -1){
					names.push(node.name);
				}
			});
			// gather the values in the form for all the inputs named in the name array
			var values = form.gatherFormValues(names),
				table = dojo.byId("table");
			// sort the name array and create a table to display the names and values
			names.sort();
			dojo.forEach(names, function(name){
				// Note: This is just a quick way to create a table, and is
				// not the most performant way to create a table using Dojo,
				// but is sufficient for this example
				dojo.place('<tr id="tr' + name + '"><td>' + name + '</td><td class="value">' + values[name] + '</td>',table);
				});
			// attach the event handlers to the control checkboxes
			dojo.query("input[id^=c0]").forEach(function(node){
				dojo.connect(node, "onclick", node, controlHandler);
			});
		});
	</script>
	</body>
</html>
